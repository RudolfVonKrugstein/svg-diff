<!DOCTYPE html>
<head>
    <title>Demo page</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.1.0/svg.min.js" integrity="sha512-RUC8QNj6IGTOnZkzc/T+oSwFpNkVAVwW+ZRBkjJ3JWgOt12bBoWqddzPOMao2iTsvaWDox58rkjo20RvbH/4Mw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="./js/animator.js"></script>
</head>
<body>
<h1>SVG Animation Demo</h1>
<div style="float: left">
    <label for="diagram">Input Diagram</label>
    <br/>
    <textarea id="diagram" cols="50" rows="16"></textarea>
    <br/>
    <button onclick="next_diagram()">Send</button>
</div>
<div style="float: right;">
    <div id="content-container" style="height:auto; width: 1000px; background-color: gray; overflow: hidden; resize: horizontal">
    </div>
</div>
<script>
    let animation_index = 0;
    let all_diffs = [];
    async function next_diagram() {
        let response = await fetch('./new_diagram', {
            method: 'POST',
            body: document.getElementById("diagram").value
        });
        if (!response.ok) {
            console.log("error:", await response.text());
            return;
        }
        let result = await response.json();
        if (result.svg !== undefined) {
            load_base_svg("content-container", result.svg);
        }
        if (result.diffs !== undefined) {
            apply_animation(result.diffs);
        }
    }


</script>
</body>
